"use strict";var _monoNav={$nav:$(".module.nav"),$window:$(window),$body:$("body"),$wrapper:$("body > div:first"),clickEvent:"click.mononav",windowWidth:$(window).width(),options:{push:!1,direction:"left"},noScrollClass:window.navigator.userAgent.match(/(iPad|iPhone|iPod|Safari)/g)&&!window.navigator.userAgent.match(/Chrome/g)?"safariNoScroll":"noScroll",init:function(){this.hasNav=this.$nav.length,Modernizr.touch&&(this.clickEvent=window.navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?this.clickEvent+" touchstart.mononav":this.clickEvent+" tap.mononav"),this.hasNav&&(this.setOptions(this.$nav.attr("data-settings")),this.setViewport(),this.buildNav(),this.openActiveParents(),this.bindDropdownEvent(),this.bindOpenEvent(),this.bindCloseEvent(),this.bindResizeEvent(),this.doubleTapToGo(this.$nav.find("li:has(ul)")),this.addSkipClickEvent())},buildNav:function(){this.$navList=this.$nav.find("> ul"),this.$listItems=this.$navList.find("li"),this.$verticalNavList=this.$nav.attr("data-settings"),$('<li class="closeBtn"/>').appendTo(this.$navList).on(this.clickEvent,$.proxy(this.closeMenu,this)),this.$listItems.each(function(t,i){$(i).find("> ul").length&&$(i).addClass("hasChildren").append('<a class="dropIco"/>'),$(i).hasClass("active")&&$(i).attr("aria-current","page")})},openActiveParents:function(){this.$listItems.filter(".active").parents(".hasChildren").addClass("showChildren")},bindDropdownEvent:function(){this.$listItems.filter(".hasChildren").find(".dropIco").on(this.clickEvent,function(t){t.preventDefault(),t.stopImmediatePropagation(),$(this).parent().toggleClass("showChildren"),$(this).attr("aria-expanded","true")})},bindOpenEvent:function(){var t=this;this.$nav.on(this.clickEvent,function(i){i.target!=this||t.$nav.hasClass("opened-menu")||(i.stopImmediatePropagation(),i.preventDefault(),t.openMenu(i),$(this).attr("aria-expanded","true"))})},bindResizeEvent:function(){var t=this;this.$window.on("resize.mononav",function(i){return t.windowWidth==t.$window.width()?!1:(t.$nav.hasClass("opened-menu")&&t.closeMenu(i),void t.setViewport())})},bindCloseEvent:function(){var t=this;$(document).on(this.clickEvent,function(i){t.$nav.hasClass("opened-menu")&&t.closeMenu(i)}),this.$navList.on(this.clickEvent,function(t){t.stopPropagation()})},openMenu:function(){if(!this.isBurgerMenu())return!1;this.$nav.addClass("opened-menu"),this.$window.width()>767?this.$body.css("overflow-x","hidden"):this.$body.css("overflow","hidden");var t;if(t=this.$window.width()>1200?80:this.$window.width()>767&&this.$window.width()<1199?50:0,"left"===this.options.direction?this.$navList.css("left","auto").animate({right:t+"%"},300):this.$navList.css("right","auto").animate({left:t+"%"},300),this.$navList.each(function(){$(this).find('[data-req~="anchor"]').attr("onClick","$('.closeBtn').click();")}),this.options.push){var i;if(i=this.$window.width()>1200?20:this.$window.width()>767&&this.$window.width()<1199?50:100,this.$window.width()<1199&&this.$body.addClass(this.noScrollClass),"left"===this.options.direction?this.$wrapper.animate({"margin-left":i+"%"},300):this.$wrapper.animate({"margin-left":-i+"%"},300),window.hasOwnProperty("_monoFixedHeader")){var n=$("header.headerFixed");if(n.length){var s=this.$window.width()/100*i;"left"===this.options.direction?n.animate({left:s+parseFloat(n.css("left"))+"px",right:-(s-parseFloat(n.css("right")))+"px"},300):n.animate({right:s+parseFloat(n.css("right"))+"px",left:-(s-parseFloat(n.css("left")))+"px"},300)}}}},closeMenu:function(t){var i=this;t.stopPropagation(),t.stopImmediatePropagation();var n=this;if(this.$nav.hasClass("opened-menu")){if(this.$navList.each(function(){$(this).find('[data-req~="anchor"]').attr("onClick","$('.closeBtn').click();")}),this.$body.css("overflow","").css("overflow-x",""),"left"===this.options.direction?this.$navList.css("left","auto").animate({right:"100%"},300,"swing",function(){$(this).css({left:"",right:""}),n.$body.removeClass(n.noScrollClass),n.$nav.removeClass("opened-menu")}):this.$navList.css("right","auto").animate({left:"100%"},300,"swing",function(){$(this).css({left:"",right:""}),n.$body.removeClass(n.noScrollClass),n.$nav.removeClass("opened-menu")}),this.options.push){this.$body.hasClass(this.noScrollClass)&&this.$wrapper.css({position:"fixed"}),this.$wrapper.animate({"margin-left":""},300,function(){i.$wrapper.css({position:""})});var s=$("header.headerFixed");if(window.hasOwnProperty("_monoFixedHeader")&&s.length){var e=this.$window.width()>767?this.$window.width()/100*20:this.$window.width()/100*90,a=Math.abs(parseFloat(s.css("left"))),o=Math.abs(parseFloat(s.css("right")));"left"===this.options.direction?s.animate({left:a-e+"px",right:e-o+"px"},300):s.animate({left:e-a+"px",right:o-e+"px"},300)}}this.$nav.attr("aria-expanded",this.$nav.hasClass("opened-menu"))}},isBurgerMenu:function(){return"sm"==this.viewport||this.$nav.is('[data-settings*="verticalNav-'+this.viewport+'=true"]')||this.$nav.is('[data-settings*="vertical="]')&&!this.$nav.is('[data-settings*="vertical=false"]')?!0:!1},doubleTapToGo:function(t){if(!("ontouchstart"in window||navigator.msMaxTouchPoints||navigator.userAgent.toLowerCase().match(/windows phone os 7/i)))return!1;var i=this;this.curItem=!1,$(t).on("click",function(t){if(!i.isBurgerMenu()){t.stopImmediatePropagation();var n=$(t.currentTarget);n[0]!=i.curItem[0]&&(t.preventDefault(),i.curItem=n)}}),$(document).on("click touchstart MSPointerDown",function(t){for(var n=!0,s=$(t.target).parents(),e=0;e<s.length;e++)s[e]==i.curItem[0]&&(n=!1);n&&(i.curItem=!1)})},setOptions:function(t){if(!t)return{};var i=this,n=t.split(",");$(n).each(function(t,n){var s=n.split("=");s[0]=s[0].replace(" ",""),i.options[s[0]]="true"==s[1]||"false"==s[1]?"true"==s[1]:s[1]})},setViewport:function(){this.$window.width()<768?this.viewport="sm":this.$window.width()<1200?this.viewport="md":this.viewport="lg"},addSkipClickEvent:function(){$(".skipNavigation").click(function(t){var i=$("#skipNavigationTarget");t.preventDefault(),$(i).attr("tabindex",-1).on("blur focusout",function(){$(i).removeAttr("tabindex")}).focus(),$([document.documentElement,document.body]).animate({scrollTop:i.offset().top},0)})}};_monoNav.init();